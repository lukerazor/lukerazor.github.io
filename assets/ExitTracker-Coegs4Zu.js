import{_ as W,r as R,j as q,b as x,c as k,a as w,w as z,v as K,F as Q,e as J,o as V,t as F}from"./index-BqpfIq7h.js";const G=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",H=G+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",D="["+G+"]["+H+"]*",ee=new RegExp("^"+D+"$");function X(n,t){const e=[];let i=t.exec(n);for(;i;){const r=[];r.startIndex=t.lastIndex-i[0].length;const s=i.length;for(let o=0;o<s;o++)r.push(i[o]);e.push(r),i=t.exec(n)}return e}const _=function(n){const t=ee.exec(n);return!(t===null||typeof t>"u")};function te(n){return typeof n<"u"}const ne={allowBooleanAttributes:!1,unpairedTags:[]};function se(n,t){t=Object.assign({},ne,t);const e=[];let i=!1,r=!1;n[0]==="\uFEFF"&&(n=n.substr(1));for(let s=0;s<n.length;s++)if(n[s]==="<"&&n[s+1]==="?"){if(s+=2,s=B(n,s),s.err)return s}else if(n[s]==="<"){let o=s;if(s++,n[s]==="!"){s=L(n,s);continue}else{let f=!1;n[s]==="/"&&(f=!0,s++);let l="";for(;s<n.length&&n[s]!==">"&&n[s]!==" "&&n[s]!=="	"&&n[s]!==`
`&&n[s]!=="\r";s++)l+=n[s];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),s--),!de(l)){let a;return l.trim().length===0?a="Invalid space after '<'.":a="Tag '"+l+"' is an invalid name.",p("InvalidTag",a,b(n,s))}const u=oe(n,s);if(u===!1)return p("InvalidAttr","Attributes for '"+l+"' have open quote.",b(n,s));let g=u.value;if(s=u.index,g[g.length-1]==="/"){const a=s-g.length;g=g.substring(0,g.length-1);const E=Y(g,t);if(E===!0)i=!0;else return p(E.err.code,E.err.msg,b(n,a+E.err.line))}else if(f)if(u.tagClosed){if(g.trim().length>0)return p("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",b(n,o));if(e.length===0)return p("InvalidTag","Closing tag '"+l+"' has not been opened.",b(n,o));{const a=e.pop();if(l!==a.tagName){let E=b(n,a.tagStartPos);return p("InvalidTag","Expected closing tag '"+a.tagName+"' (opened in line "+E.line+", col "+E.col+") instead of closing tag '"+l+"'.",b(n,o))}e.length==0&&(r=!0)}}else return p("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",b(n,s));else{const a=Y(g,t);if(a!==!0)return p(a.err.code,a.err.msg,b(n,s-g.length+a.err.line));if(r===!0)return p("InvalidXml","Multiple possible root nodes found.",b(n,s));t.unpairedTags.indexOf(l)!==-1||e.push({tagName:l,tagStartPos:o}),i=!0}for(s++;s<n.length;s++)if(n[s]==="<")if(n[s+1]==="!"){s++,s=L(n,s);continue}else if(n[s+1]==="?"){if(s=B(n,++s),s.err)return s}else break;else if(n[s]==="&"){const a=fe(n,s);if(a==-1)return p("InvalidChar","char '&' is not expected.",b(n,s));s=a}else if(r===!0&&!j(n[s]))return p("InvalidXml","Extra text at the end",b(n,s));n[s]==="<"&&s--}}else{if(j(n[s]))continue;return p("InvalidChar","char '"+n[s]+"' is not expected.",b(n,s))}if(i){if(e.length==1)return p("InvalidTag","Unclosed tag '"+e[0].tagName+"'.",b(n,e[0].tagStartPos));if(e.length>0)return p("InvalidXml","Invalid '"+JSON.stringify(e.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return p("InvalidXml","Start tag expected.",1);return!0}function j(n){return n===" "||n==="	"||n===`
`||n==="\r"}function B(n,t){const e=t;for(;t<n.length;t++)if(n[t]=="?"||n[t]==" "){const i=n.substr(e,t-e);if(t>5&&i==="xml")return p("InvalidXml","XML declaration allowed only at the start of the document.",b(n,t));if(n[t]=="?"&&n[t+1]==">"){t++;break}else continue}return t}function L(n,t){if(n.length>t+5&&n[t+1]==="-"&&n[t+2]==="-"){for(t+=3;t<n.length;t++)if(n[t]==="-"&&n[t+1]==="-"&&n[t+2]===">"){t+=2;break}}else if(n.length>t+8&&n[t+1]==="D"&&n[t+2]==="O"&&n[t+3]==="C"&&n[t+4]==="T"&&n[t+5]==="Y"&&n[t+6]==="P"&&n[t+7]==="E"){let e=1;for(t+=8;t<n.length;t++)if(n[t]==="<")e++;else if(n[t]===">"&&(e--,e===0))break}else if(n.length>t+9&&n[t+1]==="["&&n[t+2]==="C"&&n[t+3]==="D"&&n[t+4]==="A"&&n[t+5]==="T"&&n[t+6]==="A"&&n[t+7]==="["){for(t+=8;t<n.length;t++)if(n[t]==="]"&&n[t+1]==="]"&&n[t+2]===">"){t+=2;break}}return t}const re='"',ie="'";function oe(n,t){let e="",i="",r=!1;for(;t<n.length;t++){if(n[t]===re||n[t]===ie)i===""?i=n[t]:i!==n[t]||(i="");else if(n[t]===">"&&i===""){r=!0;break}e+=n[t]}return i!==""?!1:{value:e,index:t,tagClosed:r}}const le=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Y(n,t){const e=X(n,le),i={};for(let r=0;r<e.length;r++){if(e[r][1].length===0)return p("InvalidAttr","Attribute '"+e[r][2]+"' has no space in starting.",C(e[r]));if(e[r][3]!==void 0&&e[r][4]===void 0)return p("InvalidAttr","Attribute '"+e[r][2]+"' is without value.",C(e[r]));if(e[r][3]===void 0&&!t.allowBooleanAttributes)return p("InvalidAttr","boolean attribute '"+e[r][2]+"' is not allowed.",C(e[r]));const s=e[r][2];if(!ae(s))return p("InvalidAttr","Attribute '"+s+"' is an invalid name.",C(e[r]));if(!i.hasOwnProperty(s))i[s]=1;else return p("InvalidAttr","Attribute '"+s+"' is repeated.",C(e[r]))}return!0}function ue(n,t){let e=/\d/;for(n[t]==="x"&&(t++,e=/[\da-fA-F]/);t<n.length;t++){if(n[t]===";")return t;if(!n[t].match(e))break}return-1}function fe(n,t){if(t++,n[t]===";")return-1;if(n[t]==="#")return t++,ue(n,t);let e=0;for(;t<n.length;t++,e++)if(!(n[t].match(/\w/)&&e<20)){if(n[t]===";")break;return-1}return t}function p(n,t,e){return{err:{code:n,msg:t,line:e.line||e,col:e.col}}}function ae(n){return _(n)}function de(n){return _(n)}function b(n,t){const e=n.substring(0,t).split(/\r?\n/);return{line:e.length,col:e[e.length-1].length+1}}function C(n){return n.startIndex+n[1].length}const ce={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(n,t){return t},attributeValueProcessor:function(n,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(n,t,e){return n},captureMetaData:!1},ge=function(n){return Object.assign({},ce,n)};let S;typeof Symbol!="function"?S="@@xmlMetadata":S=Symbol("XML Node Metadata");class y{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,e){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:e})}addChild(t,e){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child}),e!==void 0&&(this.child[this.child.length-1][S]={startIndex:e})}static getMetaDataSymbol(){return S}}class he{constructor(t){this.suppressValidationErr=!t}readDocType(t,e){const i={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let r=1,s=!1,o=!1,f="";for(;e<t.length;e++)if(t[e]==="<"&&!o){if(s&&I(t,"!ENTITY",e)){e+=7;let l,u;[l,u,e]=this.readEntityExp(t,e+1,this.suppressValidationErr),u.indexOf("&")===-1&&(i[l]={regx:RegExp(`&${l};`,"g"),val:u})}else if(s&&I(t,"!ELEMENT",e)){e+=8;const{index:l}=this.readElementExp(t,e+1);e=l}else if(s&&I(t,"!ATTLIST",e))e+=8;else if(s&&I(t,"!NOTATION",e)){e+=9;const{index:l}=this.readNotationExp(t,e+1,this.suppressValidationErr);e=l}else if(I(t,"!--",e))o=!0;else throw new Error("Invalid DOCTYPE");r++,f=""}else if(t[e]===">"){if(o?t[e-1]==="-"&&t[e-2]==="-"&&(o=!1,r--):r--,r===0)break}else t[e]==="["?s=!0:f+=t[e];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:i,i:e}}readEntityExp(t,e){e=T(t,e);let i="";for(;e<t.length&&!/\s/.test(t[e])&&t[e]!=='"'&&t[e]!=="'";)i+=t[e],e++;if(P(i),e=T(t,e),!this.suppressValidationErr){if(t.substring(e,e+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(t[e]==="%")throw new Error("Parameter entities are not supported")}let r="";return[e,r]=this.readIdentifierVal(t,e,"entity"),e--,[i,r,e]}readNotationExp(t,e){e=T(t,e);let i="";for(;e<t.length&&!/\s/.test(t[e]);)i+=t[e],e++;!this.suppressValidationErr&&P(i),e=T(t,e);const r=t.substring(e,e+6).toUpperCase();if(!this.suppressValidationErr&&r!=="SYSTEM"&&r!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${r}"`);e+=r.length,e=T(t,e);let s=null,o=null;if(r==="PUBLIC")[e,s]=this.readIdentifierVal(t,e,"publicIdentifier"),e=T(t,e),(t[e]==='"'||t[e]==="'")&&([e,o]=this.readIdentifierVal(t,e,"systemIdentifier"));else if(r==="SYSTEM"&&([e,o]=this.readIdentifierVal(t,e,"systemIdentifier"),!this.suppressValidationErr&&!o))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:i,publicIdentifier:s,systemIdentifier:o,index:--e}}readIdentifierVal(t,e,i){let r="";const s=t[e];if(s!=='"'&&s!=="'")throw new Error(`Expected quoted string, found "${s}"`);for(e++;e<t.length&&t[e]!==s;)r+=t[e],e++;if(t[e]!==s)throw new Error(`Unterminated ${i} value`);return e++,[e,r]}readElementExp(t,e){e=T(t,e);let i="";for(;e<t.length&&!/\s/.test(t[e]);)i+=t[e],e++;if(!this.suppressValidationErr&&!_(i))throw new Error(`Invalid element name: "${i}"`);e=T(t,e);let r="";if(t[e]==="E"&&I(t,"MPTY",e))e+=4;else if(t[e]==="A"&&I(t,"NY",e))e+=2;else if(t[e]==="("){for(e++;e<t.length&&t[e]!==")";)r+=t[e],e++;if(t[e]!==")")throw new Error("Unterminated content model")}else if(!this.suppressValidationErr)throw new Error(`Invalid Element Expression, found "${t[e]}"`);return{elementName:i,contentModel:r.trim(),index:e}}readAttlistExp(t,e){e=T(t,e);let i="";for(;e<t.length&&!/\s/.test(t[e]);)i+=t[e],e++;P(i),e=T(t,e);let r="";for(;e<t.length&&!/\s/.test(t[e]);)r+=t[e],e++;if(!P(r))throw new Error(`Invalid attribute name: "${r}"`);e=T(t,e);let s="";if(t.substring(e,e+8).toUpperCase()==="NOTATION"){if(s="NOTATION",e+=8,e=T(t,e),t[e]!=="(")throw new Error(`Expected '(', found "${t[e]}"`);e++;let f=[];for(;e<t.length&&t[e]!==")";){let l="";for(;e<t.length&&t[e]!=="|"&&t[e]!==")";)l+=t[e],e++;if(l=l.trim(),!P(l))throw new Error(`Invalid notation name: "${l}"`);f.push(l),t[e]==="|"&&(e++,e=T(t,e))}if(t[e]!==")")throw new Error("Unterminated list of notations");e++,s+=" ("+f.join("|")+")"}else{for(;e<t.length&&!/\s/.test(t[e]);)s+=t[e],e++;const f=["CDATA","ID","IDREF","IDREFS","ENTITY","ENTITIES","NMTOKEN","NMTOKENS"];if(!this.suppressValidationErr&&!f.includes(s.toUpperCase()))throw new Error(`Invalid attribute type: "${s}"`)}e=T(t,e);let o="";return t.substring(e,e+8).toUpperCase()==="#REQUIRED"?(o="#REQUIRED",e+=8):t.substring(e,e+7).toUpperCase()==="#IMPLIED"?(o="#IMPLIED",e+=7):[e,o]=this.readIdentifierVal(t,e,"ATTLIST"),{elementName:i,attributeName:r,attributeType:s,defaultValue:o,index:e}}}const T=(n,t)=>{for(;t<n.length&&/\s/.test(n[t]);)t++;return t};function I(n,t,e){for(let i=0;i<t.length;i++)if(t[i]!==n[e+i+1])return!1;return!0}function P(n){if(_(n))return n;throw new Error(`Invalid entity name ${n}`)}const pe=/^[-+]?0x[a-fA-F0-9]+$/,Ee=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,be={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Ne(n,t={}){if(t=Object.assign({},be,t),!n||typeof n!="string")return n;let e=n.trim();if(t.skipLike!==void 0&&t.skipLike.test(e))return n;if(n==="0")return 0;if(t.hex&&pe.test(e))return ye(e,16);if(e.includes("e")||e.includes("E"))return we(n,e,t);{const i=Ee.exec(e);if(i){const r=i[1]||"",s=i[2];let o=Ie(i[3]);const f=r?n[s.length+1]===".":n[s.length]===".";if(!t.leadingZeros&&(s.length>1||s.length===1&&!f))return n;{const l=Number(e),u=String(l);if(l===0)return l;if(u.search(/[eE]/)!==-1)return t.eNotation?l:n;if(e.indexOf(".")!==-1)return u==="0"||u===o||u===`${r}${o}`?l:n;let g=s?o:e;return s?g===u||r+g===u?l:n:g===u||g===r+u?l:n}}else return n}}const Te=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function we(n,t,e){if(!e.eNotation)return n;const i=t.match(Te);if(i){let r=i[1]||"";const s=i[3].indexOf("e")===-1?"E":"e",o=i[2],f=r?n[o.length+1]===s:n[o.length]===s;return o.length>1&&f?n:o.length===1&&(i[3].startsWith(`.${s}`)||i[3][0]===s)?Number(t):e.leadingZeros&&!f?(t=(i[1]||"")+i[3],Number(t)):n}else return n}function Ie(n){return n&&n.indexOf(".")!==-1&&(n=n.replace(/0+$/,""),n==="."?n="0":n[0]==="."?n="0"+n:n[n.length-1]==="."&&(n=n.substring(0,n.length-1))),n}function ye(n,t){if(parseInt)return parseInt(n,t);if(Number.parseInt)return Number.parseInt(n,t);if(window&&window.parseInt)return window.parseInt(n,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function ve(n){return typeof n=="function"?n:Array.isArray(n)?t=>{for(const e of n)if(typeof e=="string"&&t===e||e instanceof RegExp&&e.test(t))return!0}:()=>!1}class me{constructor(t){if(this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,i)=>String.fromCodePoint(Number.parseInt(i,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,i)=>String.fromCodePoint(Number.parseInt(i,16))}},this.addExternalEntities=Ae,this.parseXml=_e,this.parseTextData=Oe,this.resolveNameSpace=Ce,this.buildAttributesMap=Se,this.isItStopNode=Me,this.replaceEntitiesValue=Ve,this.readStopNodeData=Ue,this.saveTextToParentTag=Fe,this.addChild=ke,this.ignoreAttributesFn=ve(this.options.ignoreAttributes),this.options.stopNodes&&this.options.stopNodes.length>0){this.stopNodesExact=new Set,this.stopNodesWildcard=new Set;for(let e=0;e<this.options.stopNodes.length;e++){const i=this.options.stopNodes[e];typeof i=="string"&&(i.startsWith("*.")?this.stopNodesWildcard.add(i.substring(2)):this.stopNodesExact.add(i))}}}}function Ae(n){const t=Object.keys(n);for(let e=0;e<t.length;e++){const i=t[e];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:n[i]}}}function Oe(n,t,e,i,r,s,o){if(n!==void 0&&(this.options.trimValues&&!i&&(n=n.trim()),n.length>0)){o||(n=this.replaceEntitiesValue(n));const f=this.options.tagValueProcessor(t,n,e,r,s);return f==null?n:typeof f!=typeof n||f!==n?f:this.options.trimValues?U(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?U(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function Ce(n){if(this.options.removeNSPrefix){const t=n.split(":"),e=n.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(n=e+t[1])}return n}const Pe=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Se(n,t){if(this.options.ignoreAttributes!==!0&&typeof n=="string"){const e=X(n,Pe),i=e.length,r={};for(let s=0;s<i;s++){const o=this.resolveNameSpace(e[s][1]);if(this.ignoreAttributesFn(o,t))continue;let f=e[s][4],l=this.options.attributeNamePrefix+o;if(o.length)if(this.options.transformAttributeName&&(l=this.options.transformAttributeName(l)),l==="__proto__"&&(l="#__proto__"),f!==void 0){this.options.trimValues&&(f=f.trim()),f=this.replaceEntitiesValue(f);const u=this.options.attributeValueProcessor(o,f,t);u==null?r[l]=f:typeof u!=typeof f||u!==f?r[l]=u:r[l]=U(f,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(r[l]=!0)}if(!Object.keys(r).length)return;if(this.options.attributesGroupName){const s={};return s[this.options.attributesGroupName]=r,s}return r}}const _e=function(n){n=n.replace(/\r\n?/g,`
`);const t=new y("!xml");let e=t,i="",r="";const s=new he(this.options.processEntities);for(let o=0;o<n.length;o++)if(n[o]==="<")if(n[o+1]==="/"){const l=v(n,">",o,"Closing Tag is not closed.");let u=n.substring(o+2,l).trim();if(this.options.removeNSPrefix){const E=u.indexOf(":");E!==-1&&(u=u.substr(E+1))}this.options.transformTagName&&(u=this.options.transformTagName(u)),e&&(i=this.saveTextToParentTag(i,e,r));const g=r.substring(r.lastIndexOf(".")+1);if(u&&this.options.unpairedTags.indexOf(u)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${u}>`);let a=0;g&&this.options.unpairedTags.indexOf(g)!==-1?(a=r.lastIndexOf(".",r.lastIndexOf(".")-1),this.tagsNodeStack.pop()):a=r.lastIndexOf("."),r=r.substring(0,a),e=this.tagsNodeStack.pop(),i="",o=l}else if(n[o+1]==="?"){let l=$(n,o,!1,"?>");if(!l)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,e,r),!(this.options.ignoreDeclaration&&l.tagName==="?xml"||this.options.ignorePiTags)){const u=new y(l.tagName);u.add(this.options.textNodeName,""),l.tagName!==l.tagExp&&l.attrExpPresent&&(u[":@"]=this.buildAttributesMap(l.tagExp,r)),this.addChild(e,u,r,o)}o=l.closeIndex+1}else if(n.substr(o+1,3)==="!--"){const l=v(n,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){const u=n.substring(o+4,l-2);i=this.saveTextToParentTag(i,e,r),e.add(this.options.commentPropName,[{[this.options.textNodeName]:u}])}o=l}else if(n.substr(o+1,2)==="!D"){const l=s.readDocType(n,o);this.docTypeEntities=l.entities,o=l.i}else if(n.substr(o+1,2)==="!["){const l=v(n,"]]>",o,"CDATA is not closed.")-2,u=n.substring(o+9,l);i=this.saveTextToParentTag(i,e,r);let g=this.parseTextData(u,e.tagname,r,!0,!1,!0,!0);g==null&&(g=""),this.options.cdataPropName?e.add(this.options.cdataPropName,[{[this.options.textNodeName]:u}]):e.add(this.options.textNodeName,g),o=l+2}else{let l=$(n,o,this.options.removeNSPrefix),u=l.tagName;const g=l.rawTagName;let a=l.tagExp,E=l.attrExpPresent,m=l.closeIndex;if(this.options.transformTagName){const c=this.options.transformTagName(u);a===u&&(a=c),u=c}e&&i&&e.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,e,r,!1));const h=e;h&&this.options.unpairedTags.indexOf(h.tagname)!==-1&&(e=this.tagsNodeStack.pop(),r=r.substring(0,r.lastIndexOf("."))),u!==t.tagname&&(r+=r?"."+u:u);const d=o;if(this.isItStopNode(this.stopNodesExact,this.stopNodesWildcard,r,u)){let c="";if(a.length>0&&a.lastIndexOf("/")===a.length-1)u[u.length-1]==="/"?(u=u.substr(0,u.length-1),r=r.substr(0,r.length-1),a=u):a=a.substr(0,a.length-1),o=l.closeIndex;else if(this.options.unpairedTags.indexOf(u)!==-1)o=l.closeIndex;else{const A=this.readStopNodeData(n,g,m+1);if(!A)throw new Error(`Unexpected end of ${g}`);o=A.i,c=A.tagContent}const N=new y(u);u!==a&&E&&(N[":@"]=this.buildAttributesMap(a,r)),c&&(c=this.parseTextData(c,u,r,!0,E,!0,!0)),r=r.substr(0,r.lastIndexOf(".")),N.add(this.options.textNodeName,c),this.addChild(e,N,r,d)}else{if(a.length>0&&a.lastIndexOf("/")===a.length-1){if(u[u.length-1]==="/"?(u=u.substr(0,u.length-1),r=r.substr(0,r.length-1),a=u):a=a.substr(0,a.length-1),this.options.transformTagName){const N=this.options.transformTagName(u);a===u&&(a=N),u=N}const c=new y(u);u!==a&&E&&(c[":@"]=this.buildAttributesMap(a,r)),this.addChild(e,c,r,d),r=r.substr(0,r.lastIndexOf("."))}else{const c=new y(u);this.tagsNodeStack.push(e),u!==a&&E&&(c[":@"]=this.buildAttributesMap(a,r)),this.addChild(e,c,r,d),e=c}i="",o=m}}else i+=n[o];return t.child};function ke(n,t,e,i){this.options.captureMetaData||(i=void 0);const r=this.options.updateTag(t.tagname,e,t[":@"]);r===!1||(typeof r=="string"&&(t.tagname=r),n.addChild(t,i))}const Ve=function(n){if(this.options.processEntities){for(let t in this.docTypeEntities){const e=this.docTypeEntities[t];n=n.replace(e.regx,e.val)}for(let t in this.lastEntities){const e=this.lastEntities[t];n=n.replace(e.regex,e.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const e=this.htmlEntities[t];n=n.replace(e.regex,e.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function Fe(n,t,e,i){return n&&(i===void 0&&(i=t.child.length===0),n=this.parseTextData(n,t.tagname,e,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,i),n!==void 0&&n!==""&&t.add(this.options.textNodeName,n),n=""),n}function Me(n,t,e,i){return!!(t&&t.has(i)||n&&n.has(e))}function $e(n,t,e=">"){let i,r="";for(let s=t;s<n.length;s++){let o=n[s];if(i)o===i&&(i="");else if(o==='"'||o==="'")i=o;else if(o===e[0])if(e[1]){if(n[s+1]===e[1])return{data:r,index:s}}else return{data:r,index:s};else o==="	"&&(o=" ");r+=o}}function v(n,t,e,i){const r=n.indexOf(t,e);if(r===-1)throw new Error(i);return r+t.length-1}function $(n,t,e,i=">"){const r=$e(n,t+1,i);if(!r)return;let s=r.data;const o=r.index,f=s.search(/\s/);let l=s,u=!0;f!==-1&&(l=s.substring(0,f),s=s.substring(f+1).trimStart());const g=l;if(e){const a=l.indexOf(":");a!==-1&&(l=l.substr(a+1),u=l!==r.data.substr(a+1))}return{tagName:l,tagExp:s,closeIndex:o,attrExpPresent:u,rawTagName:g}}function Ue(n,t,e){const i=e;let r=1;for(;e<n.length;e++)if(n[e]==="<")if(n[e+1]==="/"){const s=v(n,">",e,`${t} is not closed`);if(n.substring(e+2,s).trim()===t&&(r--,r===0))return{tagContent:n.substring(i,e),i:s};e=s}else if(n[e+1]==="?")e=v(n,"?>",e+1,"StopNode is not closed.");else if(n.substr(e+1,3)==="!--")e=v(n,"-->",e+3,"StopNode is not closed.");else if(n.substr(e+1,2)==="![")e=v(n,"]]>",e,"StopNode is not closed.")-2;else{const s=$(n,e,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&r++,e=s.closeIndex)}}function U(n,t,e){if(t&&typeof n=="string"){const i=n.trim();return i==="true"?!0:i==="false"?!1:Ne(n,e)}else return te(n)?n:""}const M=y.getMetaDataSymbol();function Re(n,t){return Z(n,t)}function Z(n,t,e){let i;const r={};for(let s=0;s<n.length;s++){const o=n[s],f=je(o);let l="";if(e===void 0?l=f:l=e+"."+f,f===t.textNodeName)i===void 0?i=o[f]:i+=""+o[f];else{if(f===void 0)continue;if(o[f]){let u=Z(o[f],t,l);const g=Le(u,t);o[M]!==void 0&&(u[M]=o[M]),o[":@"]?Be(u,o[":@"],l,t):Object.keys(u).length===1&&u[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?u=u[t.textNodeName]:Object.keys(u).length===0&&(t.alwaysCreateTextNode?u[t.textNodeName]="":u=""),r[f]!==void 0&&r.hasOwnProperty(f)?(Array.isArray(r[f])||(r[f]=[r[f]]),r[f].push(u)):t.isArray(f,l,g)?r[f]=[u]:r[f]=u}}}return typeof i=="string"?i.length>0&&(r[t.textNodeName]=i):i!==void 0&&(r[t.textNodeName]=i),r}function je(n){const t=Object.keys(n);for(let e=0;e<t.length;e++){const i=t[e];if(i!==":@")return i}}function Be(n,t,e,i){if(t){const r=Object.keys(t),s=r.length;for(let o=0;o<s;o++){const f=r[o];i.isArray(f,e+"."+f,!0,!0)?n[f]=[t[f]]:n[f]=t[f]}}}function Le(n,t){const{textNodeName:e}=t,i=Object.keys(n).length;return!!(i===0||i===1&&(n[e]||typeof n[e]=="boolean"||n[e]===0))}class Ye{constructor(t){this.externalEntities={},this.options=ge(t)}parse(t,e){if(typeof t!="string"&&t.toString)t=t.toString();else if(typeof t!="string")throw new Error("XML data is accepted in String or Bytes[] form.");if(e){e===!0&&(e={});const s=se(t,e);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const i=new me(this.options);i.addExternalEntities(this.externalEntities);const r=i.parseXml(t);return this.options.preserveOrder||r===void 0?r:Re(r,this.options)}addEntity(t,e){if(e.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(e==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=e}static getMetaDataSymbol(){return y.getMetaDataSymbol()}}const Ge={class:"page"},Xe={class:"header"},Ze={class:"game-table"},We={class:"game-table-row"},qe=["src"],xe=["href"],ze=["src"],O=3,Ke="bgg_user",Qe="https://boardgamegeek.com/xmlapi2/search?query=exit+the+game",Je="6f6a2c46-70a9-4f72-b78c-506b17b8b0e2",He={__name:"ExitTracker",setup(n){class t{id=null;name=null;year=null;thumbnailUrl=null;played=!1;constructor(d,c,N){this.id=d,this.name=c,this.year=N}}const e=["154195","311309","343072","390933"];function i(h,d){return`https://boardgamegeek.com/xmlapi2/collection?username=${h}&id=${d.join(",")}`}function r(h){return`https://boardgamegeek.com/xmlapi2/thing?id=${h.join(",")}`}const s=R([]),o=R(""),f=q(()=>s.value.map(h=>h.id));async function l(h){const d=await fetch(h,{method:"GET",headers:{Authorization:`bearer ${Je}`}});if(d.ok&&d.status!=202){const c=await d.text();return new Ye({ignoreAttributes:!1,attributeNamePrefix:""}).parse(c)}return null}async function u(){const h=await l(Qe);h?(s.value=h.items.item.filter(d=>!e.includes(d.id)).map(d=>new t(d.id,d.name.value,d.yearpublished.value)),E(),g()):(console.log(`Failed to get list of Exit games. Retrying in ${O} seconds`),setTimeout(u,O*1e3))}async function g(){for(let d=0;d<f.value.length;d+=10){const c=f.value.slice(d,d+10);a(c)}}async function a(h){const d=await l(r(h));d?d.items.item.forEach(c=>{const N=s.value.findIndex(A=>A.id==c.id);N>=0&&(s.value[N].thumbnailUrl=c.thumbnail)}):(console.log(`Failed to get game details. Retrying in ${O} seconds`),setTimeout(a,O*1e3,h))}async function E(){if(o.value.trim()!=""){const h=await l(i(o.value,f.value));h?h.items.item.forEach(d=>{if(d.status.own==1||d.status.prevowned==1){const c=s.value.findIndex(N=>N.id==d.objectid);c>=0&&(s.value[c].played=!0)}}):(console.log(`Failed to get game details. Retrying in ${O} seconds`),setTimeout(E,O*1e3))}}async function m(){s.value.forEach(h=>h.played=!1),E()}return x(async()=>{var h=window.localStorage.getItem(Ke);h&&(o.value=h,await m()),u()}),(h,d)=>(V(),k("div",Ge,[d[4]||(d[4]=w("h1",null,"Exit Tracker",-1)),w("div",Xe,[d[3]||(d[3]=w("label",{for:"bggUserTxt"},"BGG Username",-1)),z(w("input",{id:"bggUserTxt","onUpdate:modelValue":d[0]||(d[0]=c=>o.value=c),onChange:d[1]||(d[1]=c=>m())},null,544),[[K,o.value]]),w("button",{onClick:d[2]||(d[2]=c=>m())},"Refresh")]),w("div",Ze,[(V(!0),k(Q,null,J(s.value,c=>(V(),k("div",We,[w("img",{src:c.thumbnailUrl,class:"thumbnail"},null,8,qe),w("a",{href:"https://boardgamegeek.com/boardgame/"+c.id},F(c.id),9,xe),w("div",null,F(c.name),1),w("div",null,F(c.year),1),w("img",{class:"played_image",src:c.played?"/tick_icon.svg":""},null,8,ze)]))),256))]),d[5]||(d[5]=w("a",{href:"https://boardgamegeek.com"},[w("img",{src:"https://cf.geekdo-images.com/HZy35cmzmmyV9BarSuk6ug__small/img/gbE7sulIurZE_Tx8EQJXnZSKI6w=/fit-in/200x150/filters:strip_icc()/pic7779581.png"})],-1))]))}},et=W(He,[["__scopeId","data-v-4569cc1e"]]);export{et as default};
